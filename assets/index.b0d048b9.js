import{_ as L,r as c,o as f,e as N,w as p,i as o,t as h,b as l,l as U,A as P,B as j,c as k,F as C,d as S,k as E,p as _,C as H,D as J,E as K,G as O,H as Q,I as W,J as X,K as Y,L as Z,m as $,x as D,z as B,M as x,N as ee,O as te,P as ie,Q as se,R as oe,S as ne,U as ae,V as le,W as re}from"./index.d407f5be.js";const ce={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=10;return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:e,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},ue={class:"popup-title"},he={class:"footer"};function de(e,t,s,u,i,n){const m=c("van-field"),g=c("van-button"),d=c("van-form"),G=c("van-popup");return f(),N(G,{show:n.dialogVisible,"onUpdate:show":t[2]||(t[2]=b=>n.dialogVisible=b),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:p(()=>[o("h3",ue,h(e.$t("enterGroupName")),1),l(d,{class:"popup-content",onSubmit:n.onSubmit},{default:p(()=>[l(m,{modelValue:i.title,"onUpdate:modelValue":t[0]||(t[0]=b=>i.title=b),label:"",placeholder:e.$t("maximum10characters"),clearable:"",rules:i.rules},null,8,["modelValue","placeholder","rules"]),o("div",he,[l(g,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=b=>n.dialogVisible=!1)},{default:p(()=>[U(h(e.$t("cancel")),1)]),_:1}),l(g,{class:"btn","native-type":"submit",type:"primary",round:""},{default:p(()=>[U(h(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var M=L(ce,[["render",de],["__scopeId","data-v-c915b360"]]);const ve={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default(){return[]}}},components:{ChangeName:M},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},initSelected:{get(){return this.selected},set(e){this.$emit("update:selected",e)}}},watch:{show(e){e&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(e){this.type==="1"?this.addTokenFavoriteGroup(e):this.type==="2"&&this.addNftFavoriteGroup(e)},addTokenFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});P(e).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});j(e).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},fe={class:"confirm-box"};function pe(e,t,s,u,i,n){const m=c("van-radio"),g=c("van-cell"),d=c("van-field"),G=c("van-cell-group"),b=c("van-radio-group"),F=c("van-button"),R=c("van-action-sheet"),I=c("ChangeName");return f(),k(C,null,[l(R,{show:n.show,"onUpdate:show":t[4]||(t[4]=y=>n.show=y),description:"",title:s.title,teleport:"#app"},{default:p(()=>[l(b,{modelValue:i.checked,"onUpdate:modelValue":t[3]||(t[3]=y=>i.checked=y)},{default:p(()=>[l(G,null,{default:p(()=>[l(g,{title:e.$t("defaultGroup"),clickable:"",onClick:t[0]||(t[0]=y=>i.checked=0)},{"right-icon":p(()=>[l(m,{name:0})]),_:1},8,["title"]),(f(!0),k(C,null,S(s.groups,(y,T)=>(f(),N(g,{key:T,title:y.name,clickable:"",onClick:V=>i.checked=y.group_id},{"right-icon":p(()=>[l(m,{name:y.group_id},null,8,["name"])]),_:2},1032,["title","onClick"]))),128)),l(g,{title:e.$t("newGroup"),onClick:t[1]||(t[1]=y=>i.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),s.isRemark?(f(),N(d,{key:0,class:"input-remark",modelValue:i.remark,"onUpdate:modelValue":t[2]||(t[2]=y=>i.remark=y),rows:"1",autosize:"",label:"",type:"textarea",placeholder:e.$t("enterRemark")},null,8,["modelValue","placeholder"])):E("",!0)]),_:1})]),_:1},8,["modelValue"]),o("div",fe,[l(F,{type:"primary",onClick:_(n.select,["stop"]),round:"",block:""},{default:p(()=>[U(h(e.$t("confirm1")),1)]),_:1},8,["onClick"])])]),_:1},8,["show","title"]),l(I,{visible:i.visible1,"onUpdate:visible":t[5]||(t[5]=y=>i.visible1=y),confirmSubmit:n.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}var A=L(ve,[["render",pe],["__scopeId","data-v-091171da"]]);const me={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){const e=t=>(t==null?void 0:t.length)<=50;return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{visible(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},ge={class:"popup-title"},_e={class:"footer"};function be(e,t,s,u,i,n){const m=c("van-field"),g=c("van-button"),d=c("van-form"),G=c("van-popup");return f(),N(G,{show:n.dialogVisible,"onUpdate:show":t[2]||(t[2]=b=>n.dialogVisible=b),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:p(()=>[o("h3",ge,h(e.$t("editRemark")),1),l(d,{class:"popup-content",onSubmit:n.onSubmit},{default:p(()=>[l(m,{modelValue:i.title,"onUpdate:modelValue":t[0]||(t[0]=b=>i.title=b),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:i.rules},null,8,["modelValue","placeholder","rules"]),o("div",_e,[l(g,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=b=>n.dialogVisible=!1)},{default:p(()=>[U(h(e.$t("cancel")),1)]),_:1}),l(g,{class:"btn","native-type":"submit",type:"primary",round:""},{default:p(()=>[U(h(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])}var q=L(me,[["render",be],["__scopeId","data-v-79195c08"]]);const ye={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:A,ChangeName:M,EditRemark:q},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{},listLoading:!1,listError:!1,finished:!1,currentPage:1,pageSize:20}},computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(e){e==="1"&&this.getUserFavorites()},activeGroup(){this.resetList(),this.getUserFavorites(1)},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(e=1){try{let t=[];try{t=await H(this.activeGroup,e),this.listError=!1}catch(u){console.error("Failed to get favorite list:",u),this.listError=!0,this.favoritesList=[];return}if(e===1&&t.length===0)return;const s=t.map(u=>({...u,id:u.token+"-"+u.chain,address:u.token,network:u.chain,priceChange24h:u!=null&&u.price_change?(u==null?void 0:u.price_change)/100:0,priceUSD:(u==null?void 0:u.current_price_usd)||0}));e===1?this.favoritesList=s:this.favoritesList=[...this.favoritesList,...s],this.finished=s.length===0}catch(t){console.error(t),this.listError=!0,this.finished=!0}this.listLoading=!1},onLoad(){this.listLoading=!0,this.getUserFavorites(this.currentPage+1),this.currentPage++},resetList(){this.currentPage=1,this.finished=!1,this.listLoading=!1,this.listError=!1,this.favoritesList=[]},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});J(e.token+"-"+e.chain,this.activeGroup).then(u=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeFavoritesIndex(e,t,s){if(!this.$f.verifyLogin())return;let u=e.token+"-"+e.chain,i=t+s;if(i<0||i+1>this.favoritesList.length)return;let n=this.favoritesList[i],m=n.token+"-"+n.chain,g=this.$toast.loading({forbidClick:!0,duration:0});K(u,m,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{g.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});O(this.selectedToken.token+"-"+this.selectedToken.chain,e).then(s=>{s?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});P(e).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});Q(e.group_id).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});W(e.group_id).then(u=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeIndexFavoriteGroup(e,t,s){if(!this.$f.verifyLogin())return;let u=e.group_id,i=t+s;if(i<0||i+1>this.groups.length)return;let m=this.groups[i].group_id,g=this.$toast.loading({forbidClick:!0,duration:0});X(u,m).then(d=>{d?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{g.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});Y(e,this.curGroup.group_id).then(s=>{s?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0}),s=this.curToken.token+"-"+this.curToken.chain;Z(s,e).then(u=>{u?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(u=>{console.log(u),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},ke={key:0},$e={class:"fav-tabs-container"},Ge={class:"table-list"},Fe={class:"table-item table-header"},Ce={class:"table-item_d"},Ne={class:"table-item_d"},Te={class:"table-item_d"},we={class:"table-item_d"},Se={class:"token-info table-item_d"},Ue={class:"icon-token-container"},Le=["src"],Re={class:"token-symbol"},Ie={class:"table-item_d"},Ee=["onClick"],Ve={class:"table-item_d token-sort"},ze=["onClick"],De=["onClick"],Be=["onClick"],Me={class:"table-item_d"},Pe=["onClick"],je={key:1},Ae={class:"add-text"},qe={class:"table-list"},He={class:"table-item table-header"},Je={class:"table-item_d"},Ke={class:"table-item_d"},Oe={class:"table-item_d"},Qe={class:"table-item_d"},We={class:"table-item_d"},Xe={class:"table-item_d"},Ye=["onClick"],Ze={class:"table-item_d"},xe=["onClick"],et=["onClick"],tt=["onClick"],it={class:"table-item_d"},st=["onClick"];function ot(e,t,s,u,i,n){const m=c("van-tab"),g=c("van-tabs"),d=c("van-image"),G=c("van-list"),b=c("van-empty"),F=c("van-icon"),R=c("van-cell"),I=c("ChangeGroup"),y=c("ChangeName"),T=c("EditRemark"),V=c("van-action-sheet");return f(),k(C,null,[s.active==="1"?(f(),k("section",ke,[o("div",$e,[l(g,{class:"fav-tabs",active:i.activeGroup,"onUpdate:active":t[0]||(t[0]=r=>i.activeGroup=r),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:p(()=>[l(m,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(f(!0),k(C,null,S(n.groups,(r,a)=>(f(),N(m,{key:a,title:r.name,name:r.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),o("ul",Ge,[o("li",Fe,[o("div",Ce,h(e.$t("token")),1),o("div",Ne,h(e.$t("changeGroup")),1),o("div",Te,h(e.$t("sort")),1),o("div",we,h(e.$t("remark")),1)]),l(G,{loading:i.listLoading,"onUpdate:loading":t[1]||(t[1]=r=>i.listLoading=r),error:i.listError,"onUpdate:error":t[2]||(t[2]=r=>i.listError=r),finished:i.finished,"finished-text":e.$t("noMore"),"error-text":e.$t("errorText"),"loading-text":e.$t("loading"),onLoad:n.onLoad,offset:"100","immediate-check":!1},{default:p(()=>[(f(!0),k(C,null,S(i.favoritesList,(r,a)=>(f(),k("li",{key:r.id,class:"table-item"},[o("div",Se,[o("div",Ue,[(f(),N(d,{key:r.token+r.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(r),"error-icon":e.iconDefault},null,8,["src","error-icon"])),r.chain?(f(),k("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${r.chain}.png`,alt:"",srcset:""},null,8,Le)):E("",!0)]),o("span",Re,h(r.symbol),1)]),o("div",Ie,[o("i",{class:"iconfont icon-tiaozhengzu",onClick:_(v=>n.switchGroup(r),["stop"])},null,8,Ee)]),o("div",Ve,[o("i",{class:$(["iconfont icon-zhiding",{disabled:a===0}]),onClick:_(v=>n.tokenSetTop(r,a),["stop"])},null,10,ze),o("i",{class:$(["iconfont icon-shangyi",{disabled:a===0}]),onClick:_(v=>n.changeFavoritesIndex(r,a,-1),["stop"])},null,10,De),o("i",{class:$(["iconfont icon-xiayi",{disabled:a+1===i.favoritesList.length}]),onClick:_(v=>n.changeFavoritesIndex(r,a,1),["stop"])},null,10,Be)]),o("div",Me,[o("i",{class:"iconfont icon-zhongmingming",onClick:_(v=>n.handleEditRemark(r),["stop"])},null,8,Pe)])]))),128))]),_:1},8,["loading","error","finished","finished-text","error-text","loading-text","onLoad"]),D(l(b,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,i.favoritesList&&i.favoritesList.length===0||!n.groups]])])])):s.active==="2"?(f(),k("section",je,[l(R,{title:"",onClick:t[3]||(t[3]=r=>i.visible2=!0),clickable:""},{value:p(()=>[l(F,{class:"icon-add-o",name:"add-o"}),o("span",Ae,h(e.$t("newGroup")),1)]),_:1}),o("ul",qe,[o("li",He,[o("div",Je,h(e.$t("groupName")),1),o("div",Ke,h(e.$t("rename")),1),o("div",Oe,h(e.$t("sort")),1),o("div",Qe,h(e.$t("operate")),1)]),(f(!0),k(C,null,S(n.groups,(r,a)=>(f(),k("li",{key:a,class:"table-item"},[o("div",We,h(r.name),1),o("div",Xe,[o("i",{class:"iconfont icon-zhongmingming",onClick:_(v=>n.rename(r),["stop"])},null,8,Ye)]),o("div",Ze,[o("i",{class:$(["iconfont icon-zhiding",{disabled:a===0}]),onClick:_(v=>n.setTopFavoriteGroup(r,a),["stop"])},null,10,xe),o("i",{class:$(["iconfont icon-shangyi",{disabled:a===0}]),onClick:_(v=>n.changeIndexFavoriteGroup(r,a,-1),["stop"])},null,10,et),o("i",{class:$(["iconfont icon-xiayi",{disabled:a+1===n.groups.length}]),onClick:_(v=>n.changeIndexFavoriteGroup(r,a,1),["stop"])},null,10,tt)]),o("div",it,[o("i",{class:"iconfont icon-ashbin",onClick:_(v=>n.removeFavoriteGroup(r),["stop"])},null,8,st)])]))),128)),D(l(b,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,n.groups&&n.groups.length===0||!n.groups]])])])):E("",!0),l(I,{visible:i.visible1,"onUpdate:visible":t[4]||(t[4]=r=>i.visible1=r),selected:i.activeGroup,"onUpdate:selected":t[5]||(t[5]=r=>i.activeGroup=r),title:e.$t("pleaseSelectGroup"),groups:n.groups,onSelect:n.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(y,{visible:i.visible2,"onUpdate:visible":t[6]||(t[6]=r=>i.visible2=r),confirmSubmit:n.addFavoriteGroup},null,8,["visible","confirmSubmit"]),l(y,{visible:i.visible3,"onUpdate:visible":t[7]||(t[7]=r=>i.visible3=r),confirmSubmit:n.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(T,{visible:i.visible4,"onUpdate:visible":t[8]||(t[8]=r=>i.visible4=r),initRemark:i.curRemark,confirmSubmit:n.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),l(V,{show:i.show,"onUpdate:show":t[9]||(t[9]=r=>i.show=r),actions:i.actions,"cancel-text":e.$t("cancel"),onSelect:n.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var nt=L(ye,[["render",ot],["__scopeId","data-v-7020308b"]]);const at={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:A,ChangeName:M,EditRemark:q},data(){return{activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}},computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},watch:{activeType(e){e==="2"&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(e){e&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await x(this.activeGroup).catch(async()=>[])},switchGroup(e){this.selectedToken=e,this.visible1=!0},tokenSetTop(e,t){if(t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});ee(e.id,this.activeGroup).then(u=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeNftFavoritesIndex(e,t,s){if(!this.$f.verifyLogin())return;let u=e.id,i=t+s;if(i<0||i+1>this.favoritesList.length)return;let m=this.favoritesList[i].id,g=this.$toast.loading({forbidClick:!0,duration:0});te(u,m,this.activeGroup).then(d=>{d?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{g.clear()})},confirmSwitchGroup(e){if(!!this.$f.verifyLogin())if(this.activeGroup!==e){let t=this.$toast.loading({forbidClick:!0,duration:0});ie(this.selectedToken.id,e).then(s=>{s?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}else this.visible1=!1},addNftFavoriteGroup(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});j(e).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},removeNftFavoriteGroup(e){!this.$f.verifyLogin()||this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then(()=>{let t=this.$toast.loading({forbidClick:!0,duration:0});se(e.group_id).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}).catch(()=>{})},setTopNftFavoriteGroup(e,t){if(!this.$f.verifyLogin()||t===0)return;let s=this.$toast.loading({forbidClick:!0,duration:0});oe(e.group_id).then(u=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})}).catch(()=>{this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{s.clear()})},changeIndexNftFavoriteGroup(e,t,s){if(!this.$f.verifyLogin())return;let u=e.group_id,i=t+s;if(i<0||i+1>this.groups.length)return;let m=this.groups[i].group_id,g=this.$toast.loading({forbidClick:!0,duration:0});ne(u,m).then(d=>{d?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(d=>{console.log(d),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{g.clear()})},rename(e){this.curGroup=e,this.visible3=!0},changeNftFavoriteGroupName(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});ae(e,this.curGroup.group_id).then(s=>{s?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})},select(e){this.activeType=e.value},handleEditRemark(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark(e){if(!this.$f.verifyLogin())return;let t=this.$toast.loading({forbidClick:!0,duration:0});le(this.curToken.id,e).then(s=>{s?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})}).catch(s=>{console.log(s),this.$notify({type:"danger",message:this.$t("fail")})}).finally(()=>{t.clear()})}}},lt={key:0},rt={class:"fav-tabs-container"},ct={class:"table-list"},ut={class:"table-item table-header"},ht={class:"table-item_d"},dt={class:"table-item_d"},vt={class:"table-item_d"},ft={class:"table-item_d"},pt={class:"table-item"},mt={class:"token-info table-item_d"},gt={class:"icon-token-container"},_t={class:"token-symbol"},bt={class:"table-item_d"},yt=["onClick"],kt={class:"table-item_d token-sort"},$t=["onClick"],Gt=["onClick"],Ft=["onClick"],Ct={class:"table-item_d"},Nt=["onClick"],Tt={key:1},wt={class:"add-text"},St={class:"table-list"},Ut={class:"table-item table-header"},Lt={class:"table-item_d"},Rt={class:"table-item_d"},It={class:"table-item_d"},Et={class:"table-item_d"},Vt={class:"table-item_d"},zt={class:"table-item_d"},Dt=["onClick"],Bt={class:"table-item_d"},Mt=["onClick"],Pt=["onClick"],jt=["onClick"],At={class:"table-item_d"},qt=["onClick"];function Ht(e,t,s,u,i,n){var r;const m=c("van-tab"),g=c("van-tabs"),d=c("van-image"),G=c("DynamicScrollerItem"),b=c("DynamicScroller"),F=c("van-empty"),R=c("van-icon"),I=c("van-cell"),y=c("ChangeGroup"),T=c("ChangeName"),V=c("EditRemark");return f(),k(C,null,[s.active==="1"?(f(),k("section",lt,[o("div",rt,[l(g,{class:"fav-tabs",active:i.activeGroup,"onUpdate:active":t[0]||(t[0]=a=>i.activeGroup=a),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:p(()=>[l(m,{title:e.$t("defaultGroup"),name:0},null,8,["title"]),(f(!0),k(C,null,S(n.groups,(a,v)=>(f(),N(m,{key:v,title:a.name,name:a.group_id},null,8,["title","name"]))),128))]),_:1},8,["active"])]),o("ul",ct,[o("li",ut,[o("div",ht,h(e.$t("token")),1),o("div",dt,h(e.$t("changeGroup")),1),o("div",vt,h(e.$t("sort")),1),o("div",ft,h(e.$t("remark")),1)]),((r=i.favoritesList)==null?void 0:r.length)>0?(f(),N(b,{key:0,items:i.favoritesList,"min-item-size":30,keyField:"id","page-mode":"",class:"scroller"},{default:p(({item:a,index:v,active:w})=>[l(G,{item:a,active:w,"data-index":v},{default:p(()=>[o("li",pt,[o("div",mt,[o("div",gt,[l(d,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:(a==null?void 0:a.logo)||e.iconDefault,"error-icon":e.iconDefault},null,8,["src","error-icon"])]),o("span",_t,h((a==null?void 0:a.name)||""),1)]),o("div",bt,[o("i",{class:"iconfont icon-tiaozhengzu",onClick:_(z=>n.switchGroup(a),["stop"])},null,8,yt)]),o("div",kt,[o("i",{class:$(["iconfont icon-zhiding",{disabled:v===0}]),onClick:_(z=>n.tokenSetTop(a,v),["stop"])},null,10,$t),o("i",{class:$(["iconfont icon-shangyi",{disabled:v===0}]),onClick:_(z=>n.changeNftFavoritesIndex(a,v,-1),["stop"])},null,10,Gt),o("i",{class:$(["iconfont icon-xiayi",{disabled:v+1===i.favoritesList.length}]),onClick:_(z=>n.changeNftFavoritesIndex(a,v,1),["stop"])},null,10,Ft)]),o("div",Ct,[o("i",{class:"iconfont icon-zhongmingming",onClick:_(z=>n.handleEditRemark(a),["stop"])},null,8,Nt)])])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):E("",!0),D(l(F,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,i.favoritesList&&i.favoritesList.length===0||!n.groups]])])])):s.active==="2"?(f(),k("section",Tt,[l(I,{title:"",onClick:t[1]||(t[1]=a=>i.visible2=!0),clickable:""},{value:p(()=>[l(R,{class:"icon-add-o",name:"add-o"}),o("span",wt,h(e.$t("newGroup")),1)]),_:1}),o("ul",St,[o("li",Ut,[o("div",Lt,h(e.$t("groupName")),1),o("div",Rt,h(e.$t("rename")),1),o("div",It,h(e.$t("sort")),1),o("div",Et,h(e.$t("operate")),1)]),(f(!0),k(C,null,S(n.groups,(a,v)=>(f(),k("li",{key:v,class:"table-item"},[o("div",Vt,h(a.name),1),o("div",zt,[o("i",{class:"iconfont icon-zhongmingming",onClick:_(w=>n.rename(a),["stop"])},null,8,Dt)]),o("div",Bt,[o("i",{class:$(["iconfont icon-zhiding",{disabled:v===0}]),onClick:_(w=>n.setTopNftFavoriteGroup(a,v),["stop"])},null,10,Mt),o("i",{class:$(["iconfont icon-shangyi",{disabled:v===0}]),onClick:_(w=>n.changeIndexNftFavoriteGroup(a,v,-1),["stop"])},null,10,Pt),o("i",{class:$(["iconfont icon-xiayi",{disabled:v+1===n.groups.length}]),onClick:_(w=>n.changeIndexNftFavoriteGroup(a,v,1),["stop"])},null,10,jt)]),o("div",At,[o("i",{class:"iconfont icon-ashbin",onClick:_(w=>n.removeNftFavoriteGroup(a),["stop"])},null,8,qt)])]))),128)),D(l(F,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[B,n.groups&&n.groups.length===0||!n.groups]])])])):E("",!0),l(y,{visible:i.visible1,"onUpdate:visible":t[2]||(t[2]=a=>i.visible1=a),selected:i.activeGroup,"onUpdate:selected":t[3]||(t[3]=a=>i.activeGroup=a),title:e.$t("pleaseSelectGroup"),groups:n.groups,onSelect:n.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),l(T,{visible:i.visible2,"onUpdate:visible":t[4]||(t[4]=a=>i.visible2=a),confirmSubmit:n.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),l(T,{visible:i.visible3,"onUpdate:visible":t[5]||(t[5]=a=>i.visible3=a),confirmSubmit:n.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),l(V,{visible:i.visible4,"onUpdate:visible":t[6]||(t[6]=a=>i.visible4=a),initRemark:i.curRemark,confirmSubmit:n.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}var Jt=L(at,[["render",Ht],["__scopeId","data-v-2d249f2d"]]);const Kt={name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return this.activeType==="2"?Jt:nt},activeName(){let e={1:"Token",2:"NFT"};return(e==null?void 0:e[this.activeType])||"Token"}},methods:{select(e){this.activeType=e.value},back(){var e,t,s;(e=window==null?void 0:window.main)!=null&&e.back?(s=(t=window==null?void 0:window.main)==null?void 0:t.back)==null||s.call(t):this.$router.go(-1)}}};function Ot(e,t,s,u,i,n){const m=c("van-tab"),g=c("van-tabs"),d=c("van-icon"),G=c("van-nav-bar"),b=c("van-action-sheet");return f(),k(C,null,[l(G,{"left-text":"","left-arrow":"",onClickLeft:e.$f.goBack,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:p(()=>[l(g,{class:"tab-top",active:i.active,"onUpdate:active":t[0]||(t[0]=F=>i.active=F),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:p(()=>[l(m,{title:e.$t("favoriteManage"),name:"1"},null,8,["title"]),l(m,{title:e.$t("groupManage"),name:"2"},null,8,["title"])]),_:1},8,["active"])]),right:p(()=>[o("button",{class:"select-btn",onClick:t[1]||(t[1]=_(F=>i.show=!0,["stop"]))},[U(h(n.activeName)+" ",1),l(d,{name:"arrow-down"})])]),_:1},8,["onClickLeft"]),(f(),N(re(n.curComponent),{activeType:i.activeType,active:i.active},null,8,["activeType","active"])),l(b,{show:i.show,"onUpdate:show":t[2]||(t[2]=F=>i.show=F),actions:i.actions,"cancel-text":e.$t("cancel"),onSelect:n.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}var Wt=L(Kt,[["render",Ot],["__scopeId","data-v-1991bf18"]]);export{Wt as default};
